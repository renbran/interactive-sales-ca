import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
/**
 * Advanced Analytics Dashboard Component
 * Provides real-time insights, conversion metrics, and performance tracking
 */
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';
import { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';
import { Badge } from '@/components/ui/badge';
import { TrendUp, Phone, Users, Target, Clock, CheckCircle, XCircle, ArrowUp } from '@phosphor-icons/react';
import { LineChart, Line, BarChart, Bar, PieChart, Pie, Cell, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer, Area, AreaChart } from 'recharts';
import { useAnalytics } from '@/hooks/useApi';
import LiveActivityFeed from './LiveActivityFeed';
// Chart colors
const COLORS = {
    primary: '#3b82f6',
    success: '#10b981',
    warning: '#f59e0b',
    danger: '#ef4444',
    purple: '#8b5cf6',
    teal: '#14b8a6',
};
const OUTCOME_COLORS = ['#10b981', '#3b82f6', '#f59e0b', '#ef4444', '#8b5cf6'];
export default function AdvancedAnalyticsDashboard() {
    const { data: analytics, isLoading, error } = useAnalytics();
    if (isLoading) {
        return (_jsxs("div", { className: "p-4 md:p-6 space-y-6 animate-in fade-in duration-300", children: [_jsxs("div", { className: "space-y-2", children: [_jsx("div", { className: "h-8 w-48 bg-gray-200 rounded-md animate-pulse" }), _jsx("div", { className: "h-4 w-64 bg-gray-200 rounded-md animate-pulse" })] }), _jsx("div", { className: "grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4", children: Array.from({ length: 4 }).map((_, i) => (_jsxs("div", { className: "rounded-lg border bg-white p-6", children: [_jsxs("div", { className: "flex items-center justify-between mb-4", children: [_jsx("div", { className: "h-4 w-24 bg-gray-200 rounded animate-pulse" }), _jsx("div", { className: "h-5 w-5 bg-gray-200 rounded animate-pulse" })] }), _jsx("div", { className: "h-8 w-20 bg-gray-200 rounded mb-2 animate-pulse" }), _jsx("div", { className: "h-3 w-32 bg-gray-200 rounded animate-pulse" })] }, i))) }), _jsx("div", { className: "grid grid-cols-1 lg:grid-cols-2 gap-4", children: Array.from({ length: 2 }).map((_, i) => (_jsxs("div", { className: "rounded-lg border bg-white p-6 space-y-4", children: [_jsx("div", { className: "h-4 w-32 bg-gray-200 rounded animate-pulse" }), _jsx("div", { className: "h-64 bg-gray-100 rounded animate-pulse" })] }, i))) })] }));
    }
    if (error) {
        return (_jsx("div", { className: "p-6", children: _jsx(Card, { className: "border-destructive", children: _jsx(CardContent, { className: "pt-6", children: _jsx("p", { className: "text-center text-destructive", children: "Failed to load analytics data" }) }) }) }));
    }
    // Mock data for demonstration (replace with real analytics data)
    const performanceData = [
        { month: 'Jan', calls: 65, demos: 45, conversions: 28 },
        { month: 'Feb', calls: 78, demos: 52, conversions: 35 },
        { month: 'Mar', calls: 90, demos: 61, conversions: 42 },
        { month: 'Apr', calls: 85, demos: 58, conversions: 38 },
        { month: 'May', calls: 95, demos: 68, conversions: 48 },
        { month: 'Jun', calls: 110, demos: 78, conversions: 55 },
    ];
    const conversionFunnelData = [
        { stage: 'Calls Made', value: 450, color: COLORS.primary },
        { stage: 'Interested', value: 320, color: COLORS.success },
        { stage: 'Demos Booked', value: 180, color: COLORS.warning },
        { stage: 'Proposals', value: 95, color: COLORS.purple },
        { stage: 'Closed Won', value: 45, color: COLORS.teal },
    ];
    const outcomeDistribution = [
        { name: 'Demo Booked', value: 35 },
        { name: 'Follow-up', value: 28 },
        { name: 'Not Interested', value: 15 },
        { name: 'Callback', value: 12 },
        { name: 'Voicemail', value: 10 },
    ];
    const weeklyTrendData = [
        { day: 'Mon', calls: 18, success: 12 },
        { day: 'Tue', calls: 22, success: 15 },
        { day: 'Wed', calls: 19, success: 13 },
        { day: 'Thu', calls: 25, success: 18 },
        { day: 'Fri', calls: 21, success: 14 },
        { day: 'Sat', calls: 8, success: 5 },
        { day: 'Sun', calls: 5, success: 3 },
    ];
    return (_jsxs("div", { className: "p-4 md:p-6 space-y-6", children: [_jsxs("div", { className: "flex flex-col md:flex-row md:items-center md:justify-between gap-4", children: [_jsxs("div", { children: [_jsx("h1", { className: "text-2xl md:text-3xl font-bold", children: "Analytics Dashboard" }), _jsx("p", { className: "text-muted-foreground", children: "Real-time performance insights and metrics" })] }), _jsx(Badge, { variant: "outline", className: "w-fit", children: "Last updated: Just now" })] }), _jsxs("div", { className: "grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4", children: [_jsxs(Card, { children: [_jsx(CardHeader, { className: "pb-3", children: _jsxs("div", { className: "flex items-center justify-between", children: [_jsx(CardTitle, { className: "text-sm font-medium", children: "Total Calls" }), _jsx(Phone, { className: "h-4 w-4 text-muted-foreground" })] }) }), _jsxs(CardContent, { children: [_jsx("div", { className: "text-2xl font-bold", children: "450" }), _jsxs("div", { className: "flex items-center text-xs text-green-600 mt-1", children: [_jsx(ArrowUp, { className: "h-3 w-3 mr-1" }), _jsx("span", { children: "12% from last month" })] })] })] }), _jsxs(Card, { children: [_jsx(CardHeader, { className: "pb-3", children: _jsxs("div", { className: "flex items-center justify-between", children: [_jsx(CardTitle, { className: "text-sm font-medium", children: "Conversion Rate" }), _jsx(Target, { className: "h-4 w-4 text-muted-foreground" })] }) }), _jsxs(CardContent, { children: [_jsx("div", { className: "text-2xl font-bold", children: "42.3%" }), _jsxs("div", { className: "flex items-center text-xs text-green-600 mt-1", children: [_jsx(ArrowUp, { className: "h-3 w-3 mr-1" }), _jsx("span", { children: "5.2% improvement" })] })] })] }), _jsxs(Card, { children: [_jsx(CardHeader, { className: "pb-3", children: _jsxs("div", { className: "flex items-center justify-between", children: [_jsx(CardTitle, { className: "text-sm font-medium", children: "Avg Call Duration" }), _jsx(Clock, { className: "h-4 w-4 text-muted-foreground" })] }) }), _jsxs(CardContent, { children: [_jsx("div", { className: "text-2xl font-bold", children: "8.5 min" }), _jsx("div", { className: "flex items-center text-xs text-gray-600 mt-1", children: _jsx("span", { children: "Optimal range" }) })] })] }), _jsxs(Card, { children: [_jsx(CardHeader, { className: "pb-3", children: _jsxs("div", { className: "flex items-center justify-between", children: [_jsx(CardTitle, { className: "text-sm font-medium", children: "Active Leads" }), _jsx(Users, { className: "h-4 w-4 text-muted-foreground" })] }) }), _jsxs(CardContent, { children: [_jsx("div", { className: "text-2xl font-bold", children: "128" }), _jsxs("div", { className: "flex items-center text-xs text-green-600 mt-1", children: [_jsx(ArrowUp, { className: "h-3 w-3 mr-1" }), _jsx("span", { children: "18 new this week" })] })] })] })] }), _jsxs(Tabs, { defaultValue: "performance", className: "space-y-4", children: [_jsxs(TabsList, { className: "grid w-full grid-cols-4", children: [_jsx(TabsTrigger, { value: "performance", children: "Performance" }), _jsx(TabsTrigger, { value: "conversion", children: "Conversion" }), _jsx(TabsTrigger, { value: "trends", children: "Trends" }), _jsx(TabsTrigger, { value: "outcomes", children: "Outcomes" })] }), _jsx(TabsContent, { value: "performance", className: "space-y-4", children: _jsxs(Card, { children: [_jsxs(CardHeader, { children: [_jsx(CardTitle, { children: "Monthly Performance" }), _jsx(CardDescription, { children: "Calls, demos, and conversions over time" })] }), _jsx(CardContent, { children: _jsx(ResponsiveContainer, { width: "100%", height: 350, children: _jsxs(AreaChart, { data: performanceData, children: [_jsx(CartesianGrid, { strokeDasharray: "3 3" }), _jsx(XAxis, { dataKey: "month" }), _jsx(YAxis, {}), _jsx(Tooltip, {}), _jsx(Legend, {}), _jsx(Area, { type: "monotone", dataKey: "calls", stackId: "1", stroke: COLORS.primary, fill: COLORS.primary, fillOpacity: 0.6 }), _jsx(Area, { type: "monotone", dataKey: "demos", stackId: "2", stroke: COLORS.success, fill: COLORS.success, fillOpacity: 0.6 }), _jsx(Area, { type: "monotone", dataKey: "conversions", stackId: "3", stroke: COLORS.teal, fill: COLORS.teal, fillOpacity: 0.6 })] }) }) })] }) }), _jsx(TabsContent, { value: "conversion", className: "space-y-4", children: _jsxs(Card, { children: [_jsxs(CardHeader, { children: [_jsx(CardTitle, { children: "Conversion Funnel" }), _jsx(CardDescription, { children: "Lead journey from initial contact to close" })] }), _jsxs(CardContent, { children: [_jsx(ResponsiveContainer, { width: "100%", height: 350, children: _jsxs(BarChart, { data: conversionFunnelData, layout: "vertical", children: [_jsx(CartesianGrid, { strokeDasharray: "3 3" }), _jsx(XAxis, { type: "number" }), _jsx(YAxis, { dataKey: "stage", type: "category", width: 120 }), _jsx(Tooltip, {}), _jsx(Bar, { dataKey: "value", fill: COLORS.primary, children: conversionFunnelData.map((entry, index) => (_jsx(Cell, { fill: entry.color }, `cell-${index}`))) })] }) }), _jsxs("div", { className: "mt-4 grid grid-cols-2 gap-4", children: [_jsxs("div", { className: "p-4 bg-green-50 rounded-lg", children: [_jsx("p", { className: "text-sm font-medium text-green-900", children: "Overall Conversion" }), _jsx("p", { className: "text-2xl font-bold text-green-700", children: "10%" }), _jsx("p", { className: "text-xs text-green-600", children: "45 of 450 closed" })] }), _jsxs("div", { className: "p-4 bg-blue-50 rounded-lg", children: [_jsx("p", { className: "text-sm font-medium text-blue-900", children: "Avg Days to Close" }), _jsx("p", { className: "text-2xl font-bold text-blue-700", children: "28 days" }), _jsx("p", { className: "text-xs text-blue-600", children: "Industry avg: 35 days" })] })] })] })] }) }), _jsx(TabsContent, { value: "trends", className: "space-y-4", children: _jsxs(Card, { children: [_jsxs(CardHeader, { children: [_jsx(CardTitle, { children: "Weekly Activity" }), _jsx(CardDescription, { children: "Calls and success rate by day of week" })] }), _jsx(CardContent, { children: _jsx(ResponsiveContainer, { width: "100%", height: 350, children: _jsxs(LineChart, { data: weeklyTrendData, children: [_jsx(CartesianGrid, { strokeDasharray: "3 3" }), _jsx(XAxis, { dataKey: "day" }), _jsx(YAxis, {}), _jsx(Tooltip, {}), _jsx(Legend, {}), _jsx(Line, { type: "monotone", dataKey: "calls", stroke: COLORS.primary, strokeWidth: 2, dot: { r: 4 } }), _jsx(Line, { type: "monotone", dataKey: "success", stroke: COLORS.success, strokeWidth: 2, dot: { r: 4 } })] }) }) })] }) }), _jsx(TabsContent, { value: "outcomes", className: "space-y-4", children: _jsxs(Card, { children: [_jsxs(CardHeader, { children: [_jsx(CardTitle, { children: "Call Outcomes" }), _jsx(CardDescription, { children: "Distribution of call results" })] }), _jsx(CardContent, { children: _jsxs("div", { className: "flex flex-col md:flex-row items-center gap-8", children: [_jsx(ResponsiveContainer, { width: "100%", height: 300, children: _jsxs(PieChart, { children: [_jsx(Pie, { data: outcomeDistribution, cx: "50%", cy: "50%", labelLine: false, label: ({ name, percent }) => `${name} ${(percent * 100).toFixed(0)}%`, outerRadius: 100, fill: "#8884d8", dataKey: "value", children: outcomeDistribution.map((entry, index) => (_jsx(Cell, { fill: OUTCOME_COLORS[index % OUTCOME_COLORS.length] }, `cell-${index}`))) }), _jsx(Tooltip, {})] }) }), _jsx("div", { className: "space-y-3 w-full md:w-auto", children: outcomeDistribution.map((item, index) => (_jsxs("div", { className: "flex items-center gap-3", children: [_jsx("div", { className: "w-4 h-4 rounded", style: { backgroundColor: OUTCOME_COLORS[index % OUTCOME_COLORS.length] } }), _jsx("span", { className: "text-sm font-medium", children: item.name }), _jsxs("span", { className: "text-sm text-muted-foreground ml-auto", children: [item.value, "%"] })] }, item.name))) })] }) })] }) })] }), _jsxs("div", { className: "grid grid-cols-1 lg:grid-cols-3 gap-4", children: [_jsxs(Card, { children: [_jsxs(CardHeader, { children: [_jsx(CardTitle, { className: "text-lg", children: "Top Performers" }), _jsx(CardDescription, { children: "Best conversion rates this month" })] }), _jsx(CardContent, { children: _jsx("div", { className: "space-y-3", children: [
                                        { name: 'Sarah Johnson', calls: 85, conversions: 42, rate: 49.4 },
                                        { name: 'Mike Chen', calls: 72, conversions: 34, rate: 47.2 },
                                        { name: 'Emma Davis', calls: 68, conversions: 29, rate: 42.6 },
                                    ].map((agent, idx) => (_jsxs("div", { className: "flex items-center justify-between p-3 bg-gray-50 rounded-lg", children: [_jsxs("div", { children: [_jsx("p", { className: "font-medium", children: agent.name }), _jsxs("p", { className: "text-xs text-muted-foreground", children: [agent.calls, " calls \u2022 ", agent.conversions, " conversions"] })] }), _jsxs(Badge, { variant: "default", children: [agent.rate, "%"] })] }, idx))) }) })] }), _jsxs(Card, { children: [_jsxs(CardHeader, { children: [_jsx(CardTitle, { className: "text-lg", children: "Quick Actions" }), _jsx(CardDescription, { children: "Recommended next steps" })] }), _jsx(CardContent, { children: _jsxs("div", { className: "space-y-3", children: [_jsx("div", { className: "p-3 bg-green-50 border border-green-200 rounded-lg", children: _jsxs("div", { className: "flex items-start gap-2", children: [_jsx(CheckCircle, { className: "h-5 w-5 text-green-600 mt-0.5" }), _jsxs("div", { children: [_jsx("p", { className: "font-medium text-green-900", children: "Follow up with 12 warm leads" }), _jsx("p", { className: "text-xs text-green-700", children: "High conversion probability" })] })] }) }), _jsx("div", { className: "p-3 bg-blue-50 border border-blue-200 rounded-lg", children: _jsxs("div", { className: "flex items-start gap-2", children: [_jsx(TrendUp, { className: "h-5 w-5 text-blue-600 mt-0.5" }), _jsxs("div", { children: [_jsx("p", { className: "font-medium text-blue-900", children: "Schedule 8 pending demos" }), _jsx("p", { className: "text-xs text-blue-700", children: "Demos booked but not scheduled" })] })] }) }), _jsx("div", { className: "p-3 bg-orange-50 border border-orange-200 rounded-lg", children: _jsxs("div", { className: "flex items-start gap-2", children: [_jsx(XCircle, { className: "h-5 w-5 text-orange-600 mt-0.5" }), _jsxs("div", { children: [_jsx("p", { className: "font-medium text-orange-900", children: "Re-engage 25 cold leads" }), _jsx("p", { className: "text-xs text-orange-700", children: "No contact in 30+ days" })] })] }) })] }) })] }), _jsx("div", { className: "lg:col-span-2", children: _jsx(LiveActivityFeed, {}) })] })] }));
}
